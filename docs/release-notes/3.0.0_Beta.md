# Percona Monitoring and Management 3.0.0 Beta

| **Release date** | September 16th, 2024                                                                                   |
| ----------------- | ----------------------------------------------------------------------------------------------- |
| **Installation** | [Installing Percona Monitoring and Management](https://www.percona.com/software/pmm/quickstart) |

Percona Monitoring and Management (PMM) is an open source database monitoring, management, and observability solution for MySQL, PostgreSQL, and MongoDB.

It enables you to observe the health of your database systems, explore new patterns in their behavior, troubleshoot them and execute database management operations—regardless of whether your databases are located on-premises or in the cloud.

## Release highlights

### Encryption of sensitive data

To strengthen the security of your monitoring setup, all sensitive information stored in the PMM Server database, including usernames, passwords, AWS keys, Azure credentials, and TLS/SSL certificates, is now encrypted.

By default, an encryption key is automatically generated and stored at `/srv/pmm-encryption.key`. You also have the option to specify a custom path for the encryption key using the new environment variable `PMM_ENCRYPTION_KEY_PATH`.

When upgrading to PMM 3, any existing unencrypted PMM 2 data will be encrypted automatically.

### Grafana Angular support discontinuation

Grafana will discontinue support for Angular starting with version 12, expected in 2025. This affects numerous panels and plugins, including but not limited to Graph and Table panels. 

We have already migrated many plugins to newer technologies and are actively working on the remaining components to ensure continued functionality. We recommend that you review all plugins in your dashboards and begin planning transitions to newer panel types where necessary.

For a comprehensive list of affected plugins and guidance on migration, see [Grafana's official documentation](https://grafana.com/docs/grafana/latest/developers/angular_deprecation/angular-plugins/) on Angular deprecation and plugin migration.

We will provide regular updates on our migration progress in future releases to help you prepare for this change and modernize your dashboards.

## New default password for AWS Marketplace instances

PMM Server instances launched via AWS Marketplace now use the EC2 instance ID as the default password for the '*admin*' user.

This change stems from our recent transition to Docker-based deployment, ensuring secure and consistent initial access across all new AWS Marketplace instances.

Only new PMM instances launched via AWS Marketplace are affected by this update. For existing instances, continue to use 'admin' as the default password.

IMPORTANT: Make sure to change the default password immediately after first login.

For more information, see [Install PMM Server on AWS Marketplace](../install-pmm/install-pmm-server/aws/aws.md)

## Increased query length limit for MongoDB in QAN

For MongoDB queries, the default maximum query length in Query Analytics (QAN) is now 4096 characters (up from 2048).
This better supports long queries and aggregation pipelines while reducing truncation errors. Other databases retain the 2048-character limit.

## Added monitoring support for default PostgreSQL database

PMM now collects metrics from its internal PostgreSQL database, displaying them in all PostgreSQL dashboards and QAN. While using the default database isn't recommended, this provides better monitoring coverage for users who rely on this setup.

## Service Account Name length management

To prevent node registration failures, PMM automatically shortens service account names longer than 200 characters.

PMM creates a truncated name in the format `{prefix}_{hash}`, where:

- **prefix**: a portion of the original name, providing context
- **hash**: a unique identifier to avoid naming conflicts

For example, a long node name such as: `Copyvery_long_mysql_database_server_in_production_environment_with_specific_location_details_and_multiple_configuration_settings_for_east_coast_datacenter_primary_backup_replica_instance_2024`

will now be shortened to: `Copyvery_long_mysql_database_server_in_prod_4a7b3f9d`.

For more information see the [Authentication topic](../api/authentication.md).

## Disabled PostgreSQL telemetry

PMM no longer collects PostgreSQL Pillars Telemetry.

This improves compatibility with the upcoming No-root feature and streamlines configuration by relying on PMM’s own telemetry capabilities.

## Components upgrade

The following PMM components have been upgraded to their latest stable versions to enhance functionality, security, and performance:

- **Grafana 11.1.8**: Includes significant improvements over the previous version 9.2.20 integration in PMM2. For the full list of  Grafana changes included with this update, see [Grafana’s 11.1.8 changelog](https://community.grafana.com/t/changelog-updates-in-grafana-11-1-8/134843) and [Grafana release highlights](https://grafana.com/docs/grafana/latest/whatsnew/).


- **ClickHouse Datasource plugin**: Updated to address security vulnerabilities and maintain system integrity. This update ensures continued reliable operation of ClickHouse-related dashboards.

- **Node Exporter 1.8.2**: Latest stable release improves system metrics collection with upstream enhancements and fixes.


### Breaking API changes

This release introduces major breaking API changes:

- Database record identifiers no longer use prefixes (e.g., `/agent_id/`) and are now represented as plain UUIDs
- Feature toggles have been simplified from dual booleans to a single boolean control with an `enable_feature` property  
- API responses now consistently emit all fields including those with default or zero values
- Service, node, and agent management has been streamlined through consolidated endpoints where the resource type is specified as a top-level property in the request payload
- Low-level Inventory API sections have been removed from documentation in favor of the Management API for inventory-related tasks.

For detailed information about all these API changes and new endpoints, see the [Release Notes in the PMM API Documentation](https://percona-pmm.readme.io/v3/reference/release-notes/3.0.0_Beta). [Release Notes in the PMM API Documentation](https://percona-pmm.readme.io/v3/reference/release-notes/3.0.0_Beta).

## Fixed issues
  [PMM-13057](https://perconadev.atlassian.net/browse/PMM-13057) -

[PMM-12641](https://perconadev.atlassian.net/browse/PMM-12641) -
[PMM-13399]https://perconadev.atlassian.net/browse/PMM-13399 -